<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gestions des parties</title>
</head>
<body>
  <div class="diagram">
    Title: Début d'une partie
    participant Player
    participant Serveur
    participant All
    Player->Serveur: ws/game:start\ngame_id
    Note right of All: Notifies players of the game\nSee play documentation\n
    Serveur->All: ws/game:start\n{ tiles: [{x: x, y: y, resource: r, diceValue: d}, ..],\n   cities: [{x: x, y: y}, ..],\n   paths: [{from: {x: x, y: y}, to: {x: x, y: y}}, ..] }
    Note left of All: Resources: desert, caillou, bois, mouton, ble, tuile
    Note left of All: Dice values: from 2 to 12, null for desert
    Note right of Serveur: entame un tour
  </div>

  <div class="diagram">
    Title: Début d'un tour
    participant Joueur
    participant Serveur
    participant All
    Serveur->All: ws/play:new-turn\n{ player: &lt;current player&gt; }
    Joueur->Serveur: ws/play:roll-dice
    Serveur->All: ws/play:roll-dice\n{ diceValue: d, resources: [r1, ..] }
    Note left of All: Resources depend on the player
    Joueur->Serveur: Actions du joueur
    Joueur->Serveur: ws/play:end-turn
    Note left of Serveur: On recommence au début du tour
    Serveur->All: ws/play:new-turn
  </div>

  <script src="libs/jquery.min.js"></script>
  <script src="libs/underscore-min.js"></script>
  <script src="libs/raphael-min.js"></script>
  <script src="libs/sequence-diagram-min.js"></script>
  <script>
    $(".diagram").sequenceDiagram({theme: 'simple'});
  </script>
</body>
</html>